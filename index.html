<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PC Konfig</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0;}
header {background:#1b5e20; color:white; padding:15px; text-align:center;}
header h1 {margin:0;}
nav {display:flex; justify-content:center; background:#145a32;}
nav button {background:none; border:none; color:white; padding:15px 20px; cursor:pointer; font-size:16px;}
nav button:hover {background:#0d3c1a;}
section {display:none; padding:20px;}
section.active {display:block;}
/* Kolory sekcji */
#konfigurator {background:#2e7d32; color:white;}
#serwis {background:#0d47a1; color:white;}
#kontakt {background:#607d8b; color:white;}
/* Formularze */
form {max-width:600px; margin:auto;}
label {display:block; margin:10px 0 5px;}
input, select, textarea, button {width:100%; padding:8px; margin-bottom:10px; border-radius:4px; border:none;}
button {background:#1b5e20; color:white; cursor:pointer; font-size:16px;}
button:hover {background:#145a32;}
/* Cennik */
table {width:100%; border-collapse: collapse; margin-top:20px;}
th, td {border:1px solid #fff; padding:5px;}
th {background:#145a32; color:white;}
tfoot td {background:#145a32; color:white; font-weight:bold;}
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
<script>
emailjs.init("YOUR_PUBLIC_KEY"); // wstaw swój klucz publiczny EmailJS

function showSection(id){
  document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

const prices = {
  cpu:{'Intel i5':500,'Intel i7':800,'AMD Ryzen 5':600,'AMD Ryzen 7':900},
  gpu:{'GTX 1660':700,'RTX 3060':1500,'RTX 3070':2500},
  plyta:{'MSI B550':400,'ASUS B550':450},
  chlodzenie:{'SilentiumPC':120,'Noctua':200},
  obudowa:{'SilentiumPC':250,'NZXT':400},
  zasilacz:{'Corsair 550W':300,'Corsair 750W':450},
  ram:{'8GB DDR4':150,'16GB DDR4':250},
  hdd:{'1TB HDD':180,'2TB HDD':300},
  ssd:{'500GB SSD':250,'1TB SSD':400},
  wentylatory:{'Wentylator RGB':60,'Wentylator zwykły':40}
};

function calculateTotal(){
  let total=0;
  const tbody=document.getElementById('priceBody');
  tbody.innerHTML='';
  ['cpu','gpu','plyta','chlodzenie','obudowa','zasilacz'].forEach(cat=>{
    let val=document.getElementById(cat).value;
    if(val){
      total+=prices[cat][val];
      tbody.innerHTML+=`<tr><td>${cat.toUpperCase()}</td><td>${val}</td><td>${prices[cat][val]}</td></tr>`;
    }
  });
  ['ram','hdd','ssd','wentylatory'].forEach(cat=>{
    let checkboxes=document.querySelectorAll(`input[name="${cat}"]:checked`);
    checkboxes.forEach(cb=>{
      total+=prices[cat][cb.value];
      tbody.innerHTML+=`<tr><td>${cat.toUpperCase()}</td><td>${cb.value}</td><td>${prices[cat][cb.value]}</td></tr>`;
    });
  });
  document.getElementById('totalPrice').innerText=total+' zł';
  // aktualizacja podsumowania do EmailJS
  let summary='';
  Array.from(tbody.rows).forEach(r=>{
    summary+=`${r.cells[0].innerText}: ${r.cells[1].innerText} - ${r.cells[2].innerText}\n`;
  });
  document.getElementById('summary').value=summary;
}

function sendOrder(e){
  e.preventDefault();
  const templateParams={
    imie: document.getElementById('imie').value,
    email: document.getElementById('email').value,
    telefon: document.getElementById('telefon').value,
    summary: document.getElementById('summary').value,
    dodatkowe: document.getElementById('dodatkowe').value
  };
  emailjs.send("service_j52aq3o","template_ff0tc6j",templateParams)
    .then(()=>alert("Zamówienie wysłane!"))
    .catch(err=>alert("Błąd: "+err));
}

function sendService(e){
  e.preventDefault();
  const templateParams={
    imie: document.getElementById('serwisImie').value,
    email: document.getElementById('serwisEmail').value,
    telefon: document.getElementById('serwisTelefon').value,
    problem: document.getElementById('problem').value
  };
  emailjs.send("service_j52aq3o","template_0fssvdn",templateParams)
    .then(()=>alert("Zgłoszenie wysłane!"))
    .catch(err=>alert("Błąd: "+err));
}
</script>
</head>
<body onload="showSection('konfigurator')">

<header>
<h1>PC Konfig</h1>
<p>"Twój komputer, Twoje zasady"</p>
</header>

<nav>
<button onclick="showSection('konfigurator')">Konfigurator</button>
<button onclick="showSection('serwis')">Serwis</button>
<button onclick="showSection('kontakt')">Kontakt</button>
</nav>

<section id="konfigurator" class="active">
<h2>Twój konfigurator PC</h2>
<form id="konfiguratorForm" oninput="calculateTotal()">
<label>CPU</label>
<select id="cpu">
  <option value="">--Wybierz CPU--</option>
  <option>Intel i5</option>
  <option>Intel i7</option>
  <option>AMD Ryzen 5</option>
  <option>AMD Ryzen 7</option>
</select>

<label>GPU</label>
<select id="gpu">
  <option value="">--Wybierz GPU--</option>
  <option>GTX 1660</option>
  <option>RTX 3060</option>
  <option>RTX 3070</option>
</select>

<label>Płyta główna</label>
<select id="plyta">
  <option value="">--Wybierz płytę--</option>
  <option>MSI B550</option>
  <option>ASUS B550</option>
</select>

<label>Chłodzenie CPU</label>
<select id="chlodzenie">
  <option value="">--Wybierz chłodzenie--</option>
  <option>SilentiumPC</option>
  <option>Noctua</option>
</select>

<label>Obudowa</label>
<select id="obudowa">
  <option value="">--Wybierz obudowę--</option>
  <option>SilentiumPC</option>
  <option>NZXT</option>
</select>

<label>Zasilacz</label>
<select id="zasilacz">
  <option value="">--Wybierz zasilacz--</option>
  <option>Corsair 550W</option>
  <option>Corsair 750W</option>
</select>

<label>RAM (możesz wybrać kilka)</label>
<input type="checkbox" name="ram" value="8GB DDR4">8GB DDR4
<input type="checkbox" name="ram" value="16GB DDR4">16GB DDR4

<label>HDD (możesz wybrać kilka)</label>
<input type="checkbox" name="hdd" value="1TB HDD">1TB HDD
<input type="checkbox" name="hdd" value="2TB HDD">2TB HDD

<label>SSD (możesz wybrać kilka)</label>
<input type="checkbox" name="ssd" value="500GB SSD">500GB SSD
<input type="checkbox" name="ssd" value="1TB SSD">1TB SSD

<label>Wentylatory (możesz wybrać kilka)</label>
<input type="checkbox" name="wentylatory" value="Wentylator RGB">Wentylator RGB
<input type="checkbox" name="wentylatory" value="Wentylator zwykły">Wentylator zwykły

<label>Dodatkowe informacje</label>
<textarea id="dodatkowe" placeholder="Np. paczkomat, uwagi..."></textarea>

<label>Imię i nazwisko</label>
<input type="text" id="imie" required>

<label>Email</label>
<input type="email" id="email" required>

<label>Telefon</label>
<input type="tel" id="telefon" required>

<!-- Pole ukryte dla podsumowania cennika -->
<input type="hidden" id="summary">

<button onclick="sendOrder(event)">Zamów</button>
</form>

<h3>Twój cennik</h3>
<table id="priceTable">
<thead>
<tr><th>Kategoria</th><th>Wybrany podzespół</th><th>Cena (zł)</th></tr>
</thead>
<tbody id="priceBody"></tbody>
<tfoot>
<tr><td colspan="2" style="text-align:right;">Suma:</td><td id="totalPrice">0 zł</td></tr>
</tfoot>
</table>
</section>

<section id="serwis">
<h2>Serwis</h2>
<form onsubmit="sendService(event)">
<label>Imię i nazwisko</label>
<input type="text" id="serwisImie" required>

<label>Email</label>
<input type="email" id="serwisEmail" required>

<label>Telefon</label>
<input type="tel" id="serwisTelefon" required>

<label>Opis problemu</label>
<textarea id="problem" required></textarea>

<button type="submit">Wyślij zgłoszenie</button>
</form>
<p>Dostawa i odbiór komputera jest osobisty.</p>
</section>

<section id="kontakt">
<h2>Kontakt</h2>
<p>Patryk Nicki</p>
<p>Email: subarupapi03@gmail.com</p>
<p>Telefon: 535540576</p>
</section>

</body>
</html>
